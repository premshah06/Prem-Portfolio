"use strict";(self.webpackChunkprem_portfolio=self.webpackChunkprem_portfolio||[]).push([[331],{331:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var a=r(43),n=r(806),o=r(986),i=r(168),s=r(408);const c=["children","range","limit"],l=["children","positions","colors","sizes","stride"];s.Group;let u,m;const d=a.createContext(null),f=new s.Matrix4,p=new s.Vector3,g=a.forwardRef(((e,t)=>{let{children:r,range:l,limit:g=1e3}=e,h=(0,o.A)(e,c);const y=a.useRef(null);a.useImperativeHandle(t,(()=>y.current),[]);const[b,w]=a.useState([]),[[A,x,z]]=a.useState((()=>[new Float32Array(3*g),Float32Array.from({length:3*g},(()=>1)),Float32Array.from({length:g},(()=>1))]));a.useEffect((()=>{y.current.geometry.attributes.position.needsUpdate=!0})),(0,n.F)((()=>{for(y.current.updateMatrix(),y.current.updateMatrixWorld(),f.copy(y.current.matrixWorld).invert(),y.current.geometry.drawRange.count=Math.min(g,void 0!==l?l:g,b.length),u=0;u<b.length;u++)m=b[u].current,m.getWorldPosition(p).applyMatrix4(f),p.toArray(A,3*u),y.current.geometry.attributes.position.needsUpdate=!0,m.matrixWorldNeedsUpdate=!0,m.color.toArray(x,3*u),y.current.geometry.attributes.color.needsUpdate=!0,z.set([m.size],u),y.current.geometry.attributes.size.needsUpdate=!0}));const E=a.useMemo((()=>({getParent:()=>y,subscribe:e=>(w((t=>[...t,e])),()=>w((t=>t.filter((t=>t.current!==e.current)))))})),[]);return a.createElement("points",(0,i.A)({userData:{instances:b},matrixAutoUpdate:!1,ref:y,raycast:()=>null},h),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:A.length/3,array:A,itemSize:3,usage:s.DynamicDrawUsage}),a.createElement("bufferAttribute",{attach:"attributes-color",count:x.length/3,array:x,itemSize:3,usage:s.DynamicDrawUsage}),a.createElement("bufferAttribute",{attach:"attributes-size",count:z.length,array:z,itemSize:1,usage:s.DynamicDrawUsage})),a.createElement(d.Provider,{value:E},r))})),h=a.forwardRef(((e,t)=>{let{children:r,positions:c,colors:u,sizes:m,stride:d=3}=e,f=(0,o.A)(e,l);const p=a.useRef(null);return a.useImperativeHandle(t,(()=>p.current),[]),(0,n.F)((()=>{const e=p.current.geometry.attributes;e.position.needsUpdate=!0,u&&(e.color.needsUpdate=!0),m&&(e.size.needsUpdate=!0)})),a.createElement("points",(0,i.A)({ref:p},f),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:c.length/d,array:c,itemSize:d,usage:s.DynamicDrawUsage}),u&&a.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/d,array:u,itemSize:3,usage:s.DynamicDrawUsage}),m&&a.createElement("bufferAttribute",{attach:"attributes-size",count:m.length/d,array:m,itemSize:1,usage:s.DynamicDrawUsage})),r)})),y=a.forwardRef(((e,t)=>e.positions instanceof Float32Array?a.createElement(h,(0,i.A)({},e,{ref:t})):a.createElement(g,(0,i.A)({},e,{ref:t})))),b=(()=>parseInt(s.REVISION.replace(/\D+/g,"")))(),w=b>=154?"opaque_fragment":"output_fragment";class A extends s.PointsMaterial{constructor(e){super(e),this.onBeforeCompile=(e,t)=>{const{isWebGL2:r}=t.capabilities;e.fragmentShader=e.fragmentShader.replace("#include <".concat(w,">"),"\n        ".concat(r?"#include <".concat(w,">"):"#extension GL_OES_standard_derivatives : enable\n#include <".concat(w,">"),"\n      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n      float r = dot(cxy, cxy);\n      float delta = fwidth(r);     \n      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );\n      #include <tonemapping_fragment>\n      #include <").concat(b>=154?"colorspace_fragment":"encodings_fragment",">\n      "))}}}const x=a.forwardRef(((e,t)=>{const[r]=a.useState((()=>new A(null)));return a.createElement("primitive",(0,i.A)({},e,{object:r,ref:t,attach:"material"}))}));var z=r(579);const E=e=>{let{quality:t="low"}=e;const r="high"===t?1200:600,o=(0,a.useMemo)((()=>{const e=new Float32Array(3*r);for(let t=0;t<r;t++){const r=50*(Math.random()-.5),a=50*(Math.random()-.5),n=10*(Math.random()-.5);e.set([r,a,n],3*t)}return e}),[r,50]),i=(0,a.useMemo)((()=>{const e=[],t=25;for(let r=-25;r<=t;r+=2.5)e.push(new s.Vector3(-25,r,0),new s.Vector3(t,r,0)),e.push(new s.Vector3(r,-25,0),new s.Vector3(r,t,0));return new Float32Array(e.flatMap((e=>[e.x,e.y,e.z])))}),[50]);return(0,n.F)((e=>{const t=e.clock.getElapsedTime();e.camera.position.z=s.MathUtils.lerp(e.camera.position.z,2*Math.sin(t/2)+15,.01)})),(0,z.jsxs)("group",{children:[(0,z.jsx)(y,{positions:o,children:(0,z.jsx)(x,{transparent:!0,color:"#00D4FF",size:"high"===t?.1:.08,sizeAttenuation:!0,depthWrite:!1,opacity:"high"===t?.2:.15})}),(0,z.jsxs)("lineSegments",{children:[(0,z.jsx)("bufferGeometry",{children:(0,z.jsx)("bufferAttribute",{attach:"attributes-position",count:i.length/3,array:i,itemSize:3})}),(0,z.jsx)("lineBasicMaterial",{color:"#00D4FF",transparent:!0,opacity:.1,linewidth:1})]})]})}}}]);
//# sourceMappingURL=331.d80e39f4.chunk.js.map